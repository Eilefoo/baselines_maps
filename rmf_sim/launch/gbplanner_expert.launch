<launch>
  <arg name="robot_name" default="delta"/>
  <arg name="gazebo_gui_en" default="true" />
  <arg name="use_sim_time" default="true" />
  <arg name="rviz_en" default="false" />
  <arg name="launch_prefix" default="" />
  <param name="use_sim_time" value="$(arg use_sim_time)" />

  <arg name="gbplanner_config_file" default="$(find gbplanner)/config/$(arg robot_name)/gbplanner_config.yaml"/>
  <arg name="pci_file" default="$(find gbplanner)/config/$(arg robot_name)/planner_control_interface_sim_config.yaml"/>
  <arg name="octomap_config_file" default="$(find gbplanner)/config/$(arg robot_name)/octomap_sim_config.yaml"/>
  <arg name="voxblox_config_file" default="$(find gbplanner)/config/$(arg robot_name)/voxblox_sim_config.yaml"/>
  <arg name="map_config_file" default="$(arg voxblox_config_file)"/>

  <arg name="odometry_topic" default="$(arg robot_name)/odometry_sensor1/odometry"/>
  
  <!-- Graph based planning -->
  <node pkg="gbplanner" type="gbplanner_node" name="gbplanner_node" launch-prefix="$(arg launch_prefix)">
    <remap from="odometry" to="$(arg odometry_topic)" />
    <remap from="/pointcloud" to="/os1_points_ignore" /> <!-- map is already built offline -->
    <rosparam command="load" file="$(arg gbplanner_config_file)" />
    <rosparam command="load" file="$(arg map_config_file)" />
  </node>

  <node pkg="gbplanner_pci_m100" type="gbplanner_pci_m100_ros_node" name="gbplanner_pci_m100_ros_node">
    <remap from="command/trajectory" to="$(arg robot_name)/command/trajectory"/>
    <remap from="planner_server" to="gbplanner" />
    <remap from="planner_homing_server" to="gbplanner/homing" />
    <remap from="odometry" to="$(arg odometry_topic)"/>
    <rosparam command="load" file="$(arg pci_file)" />
  </node>

</launch>  